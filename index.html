<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Locations Finder</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDzCe4ZHmGVkVlvl2Je0wThyktc4_SEgcM"></script>
            <script>
            var map;
            var infoWindow;
            var request;
            var service;
            var markers = [];
            function initialize()
            {
              var center = new google.maps.LatLng(53.3244431,-6.3857867);
              map= new google.maps.Map(document.getElementById('map'),
              {
                center: center,
                zoom: 15
              }
            );
             request = {
             location: center,
             radius:8847,
             type: ['restaurant']
             };
            infoWindow = new google.maps.infoWindow();
            service = new google.maps.places.placesService(map);
            service.nearbySearch(request, callback);
            
            google.maps.event.addEventListener(map, 'rightclick',function(event){
                map.setCenter(event.LatLng)
                clearResults(markers)
            
                 var request = {
                 location: event.LatLng,
                 radius:8847,
                 type: ['restaurant']
                };
                
                service.nearbySearch(request, callback);
             } )
            }
    
                function callback(results, status){
                if(status == google.maps.places.placesServiceStatus.ok){
                for(var i= 0; i < results.length; i++){
                markers.push(creatMarker(results[i]));
                }
               }
             }
               function creatMarker(place) {
               var placeLoc = place.geometry.locations;
               var marker = new google.maps.marker({
                map: map,
                position: place.geometry.location
                });
                return marker;
           }
           function clearResults(markers){
               for(var m in markers){
                   markers[m].setMap(null)
               }
               markers = []
           }
             google.maps.event.addDomListener(window, 'load', initialize);
       </script>
    
</head>
   <body>
      <div id="map">
      </div>
   </body>
</html>